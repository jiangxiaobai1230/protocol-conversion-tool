# protocol-conversion-tool
## 语义匹配

### 轻量级词嵌入模型

1. **Sentence-BERT**
    - 基于 BERT 轻量化改造，专为短文本语义向量生成设计，推理速度比标准 BERT 快 10 倍；支持中文预训练权重；
2. **百度 ERNIE 3.0 - Tiny**
    - 中文领域优化模型，对 “中文术语缩略 / 同义词” 的捕捉能力更强；模型体积仅 100M 左右，支持 CPU 推理（单条匹配耗时＜10ms），部署成本低。
   <img width="1678" height="512" alt="Pasted image 20251011095957" src="https://github.com/user-attachments/assets/d5af6268-45e9-41d9-a440-664922798234" />

### 匹配逻辑

1. **预处理**：对表头和用户输入字段进行标准化（去除空格、统一小写、修正常见笔误“形号→型号”）；
2. **向量生成**：通过模型将表头和用户输入文本分别转化为向量；
3. **相似度计算**：采用余弦相似度计算两组向量的关联度；
4. **置信度判断**：设定阈值（如 0.7），若相似度≥阈值，则判定为 “高置信匹配”，直接输出结果；若相似度＜阈值，则判定为 “低置信匹配”，转人工处理（拖拽方式，可视化，体验更好）。

## 外挂知识库

### 知识库设计

| 字段名称             | 字段类型 | 说明                               | 示例                                                       |
| ---------------- | ---- | -------------------------------- | -------------------------------------------------------- |
| target_header    | 字符串  | 目标表头（唯一）                         | “协议名称”<br>“入参”<br>“出参”                                   |
| protocol_field   | 字符串  | 协议字段                             | “协议名”、“名称”、“协议标识”<br>“输入参数”、“方法参数”<br>“输出参数”、“输出结果”、“输出” |
| table_id<br>（可选） | 字符串  | 关联表格的唯一标识，针对不同来源的协议对应不同的表格。      | 协议来自多个供应商："supplier_001"、“supplier_002”                  |
| confidence       | 浮点数  | 匹配的置信度（人工标注时直接填写 1.0，模型匹配时取相似度值） | 1.0、0.85                                                 |
| label_time       | 时间戳  | 标注 / 更新时间                        | 2024-05-20 14:30:00                                      |
| labeler          | 字符串  | 人工标注者 ID                         | “user_001”                                               |

### 存储

MySQL

## 设计
<img width="2316" height="2250" alt="13c0101b88a1715da2ef1d497d506b39" src="https://github.com/user-attachments/assets/682e36df-f35d-4259-b305-729ed0334f4b" />
