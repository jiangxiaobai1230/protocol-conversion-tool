# 协议字段匹配工具 - 两人工作分配方案

## 项目概述

本项目是一个**协议字段匹配工具**，用于自动匹配协议字段名称到标准化的目标表头。项目分为两期开发：
- **第一期**：人工匹配 + 知识库系统（4.5周）
- **第二期**：语义匹配引擎 + 智能推荐（4周）

两个人在每期内分工合作，充分交流，共同完成。

---

## 第一期：人工匹配 + 知识库系统（4.5周）

### 总体目标
建立项目的基础框架和核心功能，实现人工匹配界面和知识库系统，为第二期的语义匹配提供基础数据。

### 分工原则
- **袁（工作量相对多）**：负责知识库系统、后端接口、批量处理、错误处理
- **鲍（工作量相对少）**：负责前端框架、匹配界面、知识库管理UI、前端测试

### 第一期核心需求

#### 后端需求
1. ✅ 知识库系统（MySQL）
2. ✅ 知识库查询功能
3. ✅ 人工匹配接口
4. ✅ 批量处理功能
5. ✅ 错误处理和日志

#### 前端需求
1. ✅ 基本页面（首页、匹配、批量处理）
2. ✅ 人工匹配界面（拖拽连线）
3. ✅ 知识库管理界面
4. ✅ 批量处理界面
5. ✅ 错误提示和加载状态

### 第一期详细分工

#### 阶段1：基础框架和前端初版（1周）- 两人共同

**共同任务**：
- [ ] 项目初始化和环境设置
  - 创建Python后端项目结构
  - 创建前端项目结构（Vue 3）
  - 设置requirements.txt和package.json
  - 配置日志系统
  - 建立代码规范
  - 建立git工作流

**袁主要工作**：
- [ ] 后端框架搭建
  - 选择FastAPI框架
  - 配置项目结构
  - 实现基础的日志系统
  - 实现基础的错误处理
  - 配置MySQL连接

**鲍主要工作**：
- [ ] 前端项目初版
  - 创建Vue 3项目（使用Vite）
  - 搭建基础UI框架（Element Plus）
  - 设计匹配交互界面
  - 建立前端开发环境

- [ ] API设计
  - 设计API规范
  - 设计数据结构
  - 编写API文档框架

**协作点**：
- 两人一起评审API设计
- 两人一起定义前后端交互规范
- 日报同步进度

---

#### 阶段2：知识库系统和匹配界面（2周）- 袁主导知识库，鲍主导前端

**袁主要工作**：
- [ ] 知识库系统
  - 设计数据库schema
  - 实现知识库CRUD操作
  - 实现知识库查询接口
  - 实现按条件查询
  - 编写单元测试

- [ ] 人工匹配接口
  - 实现匹配保存API
  - 实现知识库查询API
  - 编写接口测试

- [ ] 后端API实现
  - 实现所有需要的后端API
  - 编写API文档

**鲍主要工作**：
- [ ] 前端基本页面
  - 实现首页/仪表板
  - 实现基本导航
  - 实现基本布局

- [ ] 人工匹配界面
  - 设计拖拽连线UI
  - 实现原始字段和目标表头的显示
  - 实现拖拽连线功能
  - 实现连线的显示和删除
  - 实现连线数据的保存功能
  - 实现知识库查询功能

- [ ] 前端错误处理
  - 实现错误提示组件
  - 实现加载状态显示
  - 实现用户反馈提示

**协作点**：
- 两人评审知识库设计
- 两人进行前后端集成测试
- 两人评审API实现
- 日报同步进度

---

#### 阶段3：批量处理和知识库管理（1.5周）- 袁主导批量，鲍主导管理

**袁主要工作**：
- [ ] Word文件导入功能
  - 实现文件上传接收
  - 实现文件格式验证
  - 实现文件复制到本地目录
  - 生成唯一的文件名（时间戳）
  - 验证文件完整性
  - 编写单元测试

- [ ] Word文件导入API
  - 实现文件上传API
  - 实现文件验证API
  - 返回本地文件路径API
  - 编写接口测试

- [ ] 大文件处理和前端不卡顿
  - 实现文件上传进度推送
  - 实现表格处理进度推送
  - 实现手动输入匹配保存
  - 实现批量手动输入
  - 编写单元测试

- [ ] 大文件处理API
  - 实现WebSocket进度推送API
  - 实现手动匹配保存API
  - 实现批量手动匹配API
  - 编写接口测试

- [ ] 表格识别功能
  - 实现表格提取
  - 实现表头识别
  - 实现横向表格识别
  - 实现纵向表格识别
  - 实现混合表格识别
  - 编写单元测试

- [ ] 多表跨表数据读取功能（第一期基础版）
  - 实现多表识别
  - 实现公共字段查找
  - 实现基本的表格关联
  - 实现表格数据合并
  - 编写单元测试

- [ ] 数据输出功能
  - 实现Word文档自动识别
  - 实现模板文件自动复制
  - 实现数据自动填充
  - 生成唯一的输出文件名
  - 编写单元测试

- [ ] 数据输出API
  - 实现Word文档处理API
  - 实现自动识别和填充API
  - 返回结果文件路径API
  - 编写接口测试

**鲍主要工作**：
- [ ] 知识库管理界面
  - 实现知识库查看页面
  - 实现条目搜索功能
  - 实现按来源筛选
  - 实现匹配统计显示
  - 实现条目编辑功能

- [ ] 大文件处理UI
  - 实现文件上传进度条
  - 实现表格处理进度显示
  - 实现手动输入匹配界面
  - 实现批量手动输入界面
  - 实现拖拽连线防抖处理

- [ ] Word文件导入界面
  - 实现文件上传按钮
  - 实现文件选择器
  - 显示上传进度
  - 显示文件验证结果
  - 实现错误提示

- [ ] 数据输出界面
  - 显示处理进度
  - 显示处理结果（自动生成的Excel文件）
  - 提供结果文件下载链接
  - 实现错误信息显示

- [ ] 历史记录页面
  - 实现历史记录查看
  - 实现按日期筛选
  - 实现搜索功能

**协作点**：
- 两人评审批量处理流程
- 两人测试前后端集成
- 日报同步进度

---

#### 阶段4：集成测试、优化和文档（1周）- 两人共同

**共同任务**：
- [ ] 集成测试
  - 编写完整的集成测试用例
  - 测试完整的匹配流程
  - 测试知识库的保存和查询
  - 测试批量处理流程
  - 测试前后端集成

- [ ] 性能优化
  - 后端性能测试（知识库查询<50ms）
  - 前端渲染性能优化
  - 数据库查询优化

- [ ] 文档完善
  - 完善API文档
  - 编写使用说明
  - 编写部署指南
  - 编写前端开发指南
  - 编写后端开发指南

- [ ] Bug修复
  - 修复发现的bug
  - 完善错误处理
  - 增加日志

### 第一期交付成果

1. ✅ 知识库系统（MySQL）
2. ✅ 人工匹配界面（拖拽连线）
3. ✅ 知识库查询功能
4. ✅ 知识库管理界面
5. ✅ 批量处理功能
6. ✅ 基本前端页面
7. ✅ 历史记录页面
8. ✅ 错误处理和日志系统
9. ✅ 完整的单元测试和集成测试（覆盖率>80%）
10. ✅ API文档和使用说明
11. ✅ 可部署到测试环境

---

## 第二期：语义匹配引擎 + 智能推荐（4周）

### 总体目标
在第一期基础上，集成ERNIE 3.0 Tiny模型，实现语义匹配和智能推荐，优化系统性能。

### 分工原则
- **袁（工作量相对多）**：负责预处理、向量生成、相似度计算、置信度判断、知识库优化
- **鲍（工作量相对少）**：负责智能推荐UI、用户反馈UI、模型对比工具、前端优化

### 第二期核心需求

#### 后端需求
1. ✅ 预处理模块
2. ✅ 向量生成模块（ERNIE 3.0 Tiny）
3. ✅ 相似度计算模块
4. ✅ 置信度判断模块
5. ✅ 智能推荐功能
6. ✅ 知识库优化
7. ✅ 模型微调

#### 前端需求
1. ✅ 智能匹配界面
2. ✅ 用户反馈UI
3. ✅ 模型对比工具
4. ✅ 前端优化

### 第二期详细分工

#### 阶段1：预处理和向量生成（1.5周）- 袁主导，鲍配合

**袁主要工作**：
- [ ] 预处理模块
  - 实现文本标准化逻辑
  - 实现笔误修正规则
  - 实现特殊符号处理
  - 编写单元测试

- [ ] 向量生成模块
  - 集成ERNIE 3.0 Tiny模型
  - 实现模型加载和初始化
  - 实现向量生成逻辑
  - 实现向量缓存机制
  - 编写单元测试

- [ ] 后端API实现（第一部分）
  - 实现预处理API
  - 实现向量生成API
  - 编写接口测试

**鲍主要工作**：
- [ ] 前端UI准备
  - 设计智能匹配界面
  - 设计推荐显示方式
  - 设计用户反馈UI

**协作点**：
- 两人评审预处理和向量生成设计
- 两人测试前后端集成
- 日报同步进度

---

#### 阶段2：相似度计算和置信度判断（1.5周）- 袁主导匹配，鲍主导UI

**袁主要工作**：
- [ ] 相似度计算模块
  - 实现余弦相似度计算
  - 实现批量计算优化
  - 性能测试和优化
  - 编写单元测试

- [ ] 置信度判断模块
  - 实现置信度阈值判断
  - 实现可配置的阈值
  - 实现候选项排序
  - 编写单元测试

- [ ] 智能推荐功能
  - 实现推荐生成逻辑
  - 实现推荐保存接口
  - 编写接口测试

- [ ] 知识库优化
  - 实现用户反馈收集
  - 实现置信度更新
  - 实现错误匹配识别

**鲍主要工作**：
- [ ] 智能匹配界面
  - 实现输入框和结果显示
  - 实现相似度分数显示
  - 实现候选项列表
  - 实现用户选择交互
  - 实现推荐确认功能

- [ ] 用户反馈UI
  - 实现反馈收集界面
  - 实现反馈提交功能
  - 实现反馈统计显示

**协作点**：
- 两人评审相似度计算设计
- 两人测试前后端集成
- 两人评审推荐逻辑
- 日报同步进度

---

#### 阶段3：模型微调和优化（1周）- 两人共同

**袁主要工作**：
- [ ] 模型微调
  - 准备训练数据（来自第一期知识库）
  - 微调ERNIE 3.0 Tiny
  - 评估模型性能
  - 版本管理
  - 编写测试

- [ ] 性能优化
  - 后端性能优化（单条匹配<10ms）
  - 数据库查询优化
  - 向量缓存优化

**鲍主要工作**：
- [ ] 模型对比工具
  - 实现模型对比界面
  - 显示性能指标
  - 显示推荐对比
  - 支持模型切换

- [ ] 前端优化
  - 前端渲染优化
  - 网络请求优化
  - 编写性能测试

**共同任务**：
- [ ] 集成测试
  - 编写完整的集成测试
  - 测试完整的匹配流程
  - 测试推荐流程
  - 测试用户反馈流程

---

#### 阶段4：集成测试和部署（1周）- 两人共同

**共同任务**：
- [ ] 用户验收测试
  - 邀请用户进行测试
  - 收集用户反馈
  - 修复反馈中的问题

- [ ] 文档完善
  - 完善API文档
  - 编写用户指南
  - 编写系统架构文档
  - 编写部署指南
  - 编写模型微调指南

- [ ] 部署准备
  - 编写部署脚本
  - 配置生产环境
  - 设置监控告警
  - 准备回滚方案

### 第二期交付成果

1. ✅ 预处理模块
2. ✅ 向量生成模块（ERNIE 3.0 Tiny）
3. ✅ 相似度计算模块
4. ✅ 置信度判断模块
5. ✅ 智能推荐功能
6. ✅ 知识库优化模块
7. ✅ 模型微调功能
8. ✅ 用户反馈收集系统
9. ✅ 模型对比工具
10. ✅ 智能匹配前端界面
11. ✅ 完整的集成测试（覆盖率>80%）
12. ✅ 用户文档和操作指南
13. ✅ 可部署到生产环境

---

## 两人协作框架

### 沟通方式
- **周会**：每周五下午，深度讨论
- **即时沟通**：遇到问题立即沟通
- **代码审查**：代码合并前审查

### 代码库组织

```
protocol-conversion-tool/
├── backend/
│   ├── app/
│   │   ├── core/
│   │   │   ├── knowledge_base.py      # 袁主导
│   │   │   ├── preprocessing.py       # 袁主导（第二期）
│   │   │   ├── embedding.py           # 袁主导（第二期）
│   │   │   ├── similarity.py          # 袁主导（第二期）
│   │   │   └── recommendation.py      # 袁主导（第二期）
│   │   ├── api/
│   │   │   ├── kb_api.py              # 袁主导
│   │   │   ├── match_api.py           # 袁主导
│   │   │   ├── batch_api.py           # 袁主导
│   │   │   └── semantic_api.py        # 袁主导（第二期）
│   │   ├── models/
│   │   │   └── kb_model.py            # 袁主导
│   │   ├── schemas/
│   │   │   └── *.py                   # 两人共同
│   │   └── utils/
│   │       ├── logger.py              # 两人共同
│   │       └── error_handler.py       # 两人共同
│   ├── tests/
│   │   ├── test_core.py               # 两人共同
│   │   └── test_api.py                # 两人共同
│   ├── requirements.txt
│   └── main.py
├── frontend/
│   ├── src/
│   │   ├── components/
│   │   │   ├── MatchingUI.vue         # 鲍主导
│   │   │   ├── RecommendationUI.vue   # 鲍主导（第二期）
│   │   │   └── FeedbackUI.vue         # 鲍主导（第二期）
│   │   ├── pages/
│   │   │   ├── Dashboard.vue          # 鲍主导
│   │   │   ├── Matching.vue           # 鲍主导
│   │   │   ├── BatchProcess.vue       # 鲍主导
│   │   │   ├── KnowledgeBase.vue      # 鲍主导
│   │   │   └── History.vue            # 鲍主导
│   │   ├── api/
│   │   │   └── client.js              # 鲍主导
│   │   ├── store/
│   │   │   └── *.js                   # 鲍主导
│   │   └── App.vue
│   ├── tests/
│   │   └── test_components.js         # 鲍编写
│   └── package.json
├── docs/
│   ├── api.md                         # 两人共同
│   ├── user_guide.md                  # 两人共同
│   ├── deployment.md                  # 两人共同
│   ├── backend_guide.md               # 袁主导
│   └── model_tuning.md                # 袁主导（第二期）
└── tests/
    ├── test_data/                     # 两人共同
    └── fixtures/                      # 两人共同
```

### 协作规则
1. **代码提交前**：必须通过单元测试
2. **代码合并前**：必须经过对方代码审查
3. **接口改动**：必须通知对方
4. **文档更新**：实时更新，不能滞后
5. **问题解决**：遇到问题立即沟通
6. **测试覆盖**：新代码必须有单元测试
7. **代码风格**：遵循项目代码规范

---

## 时间规划

### 第一期时间规划（4.5周）

| 周次 | 主题 | 袁工作 | 鲍工作 | 协作 |
|------|------|--------|--------|------|
| 第1周 | 基础框架 | 后端框架、MySQL配置 | 前端框架、API设计 | 评审设计 |
| 第2周 | 知识库系统 | 知识库CRUD、查询 | 匹配界面、拖拽连线 | 集成测试 |
| 第3周 | 继续知识库 | 知识库完善、API | 匹配完善、知识库管理 | 集成测试 |
| 第4周 | 批量处理 | 批量处理、导出 | 批量UI、历史记录 | 集成测试 |
| 第4.5周 | 测试优化 | 性能优化、文档 | 集成测试、文档 | 联合测试 |

### 第二期时间规划（4周）

| 周次 | 主题 | 袁工作 | 鲍工作 | 协作 |
|------|------|--------|--------|------|
| 第1-1.5周 | 预处理和向量 | 预处理、向量生成 | 智能匹配UI设计 | 评审设计 |
| 第1.5-3周 | 相似度和推荐 | 相似度、推荐、优化 | 推荐UI、反馈UI | 集成测试 |
| 第3-4周 | 模型微调和优化 | 模型微调、性能优化 | 模型对比、前端优化 | 性能测试 |
| 第4周 | 集成和部署 | 集成测试、部署 | 集成测试、部署 | 联合测试 |

---

## 技术栈

### 后端技术栈
- FastAPI、SQLAlchemy、MySQL
- ERNIE 3.0 Tiny（第二期）
- numpy/scipy、pytest、flake8、mypy
- python-dotenv、sqlalchemy-utils

### 前端技术栈
- Vue 3、Vite、Element Plus、axios
- Pinia、vue-router、Vue Draggable
- dayjs、lodash-es、vee-validate
- Vitest、ESLint、Prettier

---

## 质量标准

### 代码覆盖率目标
- 后端核心模块：>85%
- 后端API：>80%
- 前端组件：>80%
- 集成测试：>70%

### 代码风格
- 后端：PEP 8规范，使用black、flake8、mypy
- 前端：ESLint规范，使用Prettier

### PR审查规范
1. 每个PR必须有清晰的描述
2. 必须通过所有自动化测试
3. 必须经过对方代码审查
4. 必须有新增功能的单元测试
5. 必须更新相关文档

